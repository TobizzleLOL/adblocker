const blocklist = [
  ".s3.amazonaws",
  "advertising-api-eu.amazon",
  "pagead2.googlesyndication",
  "adservice.google",
  "pagead2.googleadservices",
  "afs.googlesyndication",
  "Doubleclick",
  "stats.g.doubleclick",
  "ad.doubleclick",
  "static.doubleclick",
  "m.doubleclick",
  "mediavisor.doubleclick",
  "ads30.adcolony",
  "adc3-launch.adcolony",
  "events3alt.adcolony",
  "wd.adcolony",
  "Media",
  "static.media",
  "media",
  "adservetx.media",
  "analytics.google",
  "click.googleanalytics",
  "google-analytics",
  "ssl.google-analytics",
  "adm.hotjar",
  "identify.hotjar",
  "insights.hotjar",
  "script.hotjar",
  "surveys.hotjar",
  "careers.hotjar",
  "events.hotjar.io",
  "mouseflow",
  "cdn.mouseflow",
  "o2.mouseflow",
  "gtm.mouseflow",
  "api.mouseflow",
  "tools.mouseflow",
  "cdn-test.mouseflow",
  "freshmarketer",
  "claritybt.freshmarketer",
  "fwtracks.freshmarketer",
  "luckyorange",
  "api.luckyorange",
  "realtime.luckyorange",
  "cdn.luckyorange",
  "w1.luckyorange",
  "upload.luckyorange",
  "cs.luckyorange",
  "settings.luckyorange",
  "stats.wp",
  "notify.bugsnag",
  "sessions.bugsnag",
  "api.bugsnag",
  "app.bugsnag",
  "browser.sentry-cdn",
  "app.getsentry",
  "pixel.facebook",
  "an.facebook",
  "ads-api.twitter",
  "static.ads-twitter",
  "ads.linkedin",
  "analytics.pointdrive.linkedin",
  "ads.pinterest",
  "log.pinterest",
  "analytics.pinterest",
  "trk.pinterest",
  "widgets.pinterest",
  "events.reddit",
  "events.redditmedia",
  "ads.youtube",
  "ads-api.tiktok",
  "analytics.tiktok",
  "ads-sg.tiktok",
  "analytics-sg.tiktok",
  "business-api.tiktok",
  "ads.tiktok",
  "log.byteoversea",
  "ads.yahoo",
  "analytics.yahoo",
  "geo.yahoo",
  "udc.yahoo",
  "udcm.yahoo",
  "advertising.yahoo",
  "analytics.query.yahoo",
  "partnerads.ysm.yahoo",
  "log.fc.yahoo",
  "gemini.yahoo",
  "adtech.yahooinc",
  "extmaps-api.yandex",
  "appmetrica.yandex",
  "adfstat.yandex",
  "metrika.yandex",
  "advertising.yandex",
  "offerwall.yandex",
  "adfox.yandex",
  "auction.unityads.unity3d",
  "webview.unityads.unity3d",
  "config.unityads.unity3d",
  "adserver.unityads.unity3d"
  ]

chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
      return {cancel: !blocklist.every(checkurl, details.url)};
    },
    {urls: ["<all_urls>"]},
    ["blocking"]
  );

  function checkurl(url){
      return this.indexOf(url) == -1;
  }